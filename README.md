# SQAaaS OpenAPI server

## Overview
API server implementation for the SQA-as-a-Service (SQAaaS) platform.

### API First strategy
The SQAaaS API implementation follows an API First strategy, where changes in the specification
are subsequently coded.

#### The OpenAPI specification
The SQAaaS API specification is maintained in a separate [repository](https://github.com/eosc-synergy/sqaaas-api-spec). 

#### OpenAPI Generator
Whenever the specification changes the code is generated by the [OpenAPI Generator](https://openapi-generator.tech) project.
The SQAaaS API uses Python's [Connexion](https://github.com/zalando/connexion) library on top of [aiohttp](https://docs.aiohttp.org/en/stable/).

The generator does not modify the set of files maintained in the [.openapi-generator-ignore](.openapi-generator-ignore).

## Requirements
Python 3.5.2+ & [requirements.txt](requirements.txt)

## Usage
To run the API server, please execute the following from the root directory:

```
pip3 install -r requirements.txt
python3 -m openapi_server
```

and open your browser to here:

```
http://localhost:8080/v1/ui/
```

The SQAaaS OpenAPI definition can be accessed through:

```
http://localhost:8080/v1/openapi.json
```

### Docker
Different SQAaaS API server versions will be made available as Docker images through [Docker Hub site](https://hub.docker.com/orgs/eoscsynergy/repositories). 

The following command will execute a given version of the SQAaaS API server container, having the required files in the `my-sqaaas-api-environ` folder:
```
$ docker run -v <my-sqaaas-api-environ>:/etc/sqaaas -t eoscsynergy/sqaaas-api-server:<version>
```

## Development
### Deploy in editable mode
Within the root path repository, execute:
```
$ pip3 install -e .
```

### Running tests

To launch the integration tests, use pytest:
```
sudo pip install -r test-requirements.txt
pytest
```
### Building the Docker image
In the root path of the current repository, execute:
```
$ docker build -t eoscsynergy/sqaaas-api-server:<version> -f docker/Dockerfile .
```
